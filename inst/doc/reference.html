<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>mirai - Reference Manual</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">mirai - Reference Manual</h1>



<div id="table-of-contents" class="section level3">
<h3>Table of Contents</h3>
<p><a href="https://shikokuchuo.net/mirai/" alt="mirai"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgYAAAJYCAMAAAAuZd4VAAAC9FBMVEUAAADUzMzdyszfzMzdys3eys3eyszeyszdyszdyszdyszdyszeyszdyszdyszdyszdyszdyszdyszdyszdy8zey83dyszdyszdyszdyszdy8zeyszdyszdy8zey8zdyszdy8zeyszdyszdy8zdys3dy8wXHUHdysz///++r7W9vcBqZnx/f4j9/f0cIUTn5+jayMohJkcwM1BERV4lKUoqLU7c3N7Gtrz7+fz09vZKTGA7PVY1N1bMu8CTipiLg5P6/8jQv8P1/5FVU23k/wNdWnLh4eLExMf2/62akJ1kYXj3+PjTwcWsn6n0/6BOTWi3qbGJipFbXWvt/wX7/9f4/7vb/wbKys0+P1zN/k8hfBjy8vOxpK6EfI7w/4Akihnv7+/Z2dvQ0NN0b4NlZnLd/jzG/QT9//Kqq6+lmaWTlJp6c4Ze3BjV1de2trrs7O3q6uv8/+V/eIpwan/m/23k5ObXxciglaFvcHut+zYglRmysraq+gnp/pG9/D29/inN/xxZxRXVw8e8rbWdnqPb+4x1d3/z/27L/meZmqDh/U7r/0c5qR4qoxwzlhqhoafh+3vt/2+0/G+n+kZPpCBDwhpt5BYaahWY+g24/Qzb/bSvr7Olpaq++5R7fIXO/TNUuC6a+Cjd/Sbt/x9FmRXS/wPq+a3Z+mmO9zA2th5rwBxGsxre+siq9IDO+njy/19mv0dXzx2F6A6N8wuF71mS9ke44jOHzi9/6yMdTRrS4mlUVmW6/U6/7kt90kbu/jOBsCyQ4x1v1w/z+8/A/KnS/IWj7mDr/Fuz+1pk4EuM3kWo6C9gsxd88xWj8wPv/bzD7mvc/Vqkzhi67BWe4xLZ/J3E74zB+XuP1WXT8lqo1FPL7jZl0DGGyhP44/5v7TPx++OR72eXuEtKp0sxbTY/hzKqzYiT4oVq1W5bcBviwvzY79ezzNO9wyxojR/i2fvIoOC79snCmfPR5vCmi91NioHHrGTx2GPS6vXH3ZSThkh5fEAAmlN6AAAAJnRSTlMABfsLERjz7U9ad4E7ROiMMp+WZG0f9+HHKyTbqNbNs9Guwbi7vbGdU70AABylSURBVHja7N1NT1pBFMbxi7yoCKLiG7a1WuucmCY3IBAS34gxLDQaXbrQlSvjThPd6xevbU1tnRmBy71yzszz+xRw/5nnBAAQZMoT+akAvJYpzdOzxUIA3kqVR+nFdDYAPxVX6FUunw7AP3Of6X8LYwF4Jj0xT5pv+K3ol/FJMhmZwU8Ef0wtks3obCoAH2Sn6T1figE4L5XPURdflwJw29gn6m6klAnAXZV16s1oGT8RXJWZGSHdXvNol3Qr+IngpNTsKOkuzpVStdsq6T7PBeCa4hfStTrqj50H0s1P4PuyW5a+ku7+pqb+On0i3cJ4AM7IlEZId7ip/hX+2CfdIr4vOyJVniTdWV291WhX6RUStFMKy6TbPQqVwc416XJ5/HmU7jkn66qXNWVxsEG6T0jQohlzMj3sKLvw7ph065UApBpfIN3GqXpfc8+YoPF9WSZjTt7/Eaquzi+QoB1hzMnVdkP1pNNCgnaAOSefbKte1W7ukaClM+bk1oHqx+YhErRole+kO74KVZ/qZ6SbRIIWwZaTVf9CY4JexhMn9iw5ua6iaVwiQQtky8kRIEFLtbRqysm3NTWQ0w0kaEHStpwcARK0VOacvKUiQIKWypqTY7J9ggTNniUnN1SMDlpI0KylJ3Kku95R8QqvTAn6OxI0D5FyshkStFRT30w5+S5UiagjQXNkyclNFQEStFCWnHyuklS7NSXoVSTovjDLyZroCRrfl4ehska6Ry0nJ2LLnKAD+GCZUmw5WSFBCxVnTkaClqq4QrrdjvpY5idOSNB2yefkarScjAQtlPEhkjknJy+82yesbA6BcdfyaUsNS9OYoLGymaiC7SHSEJ0jQX+s7HSMORkJWqZ03pKThy+8eiTdGhJ0/MaMOflA8dDcwxOn5Jlz8vFdqNioX2BlM2FZ40OkdlOx0sHKpibeL8fmnMyNeWVzFd+XeT5ESs7mIZ44aRLbtXy8qSmmtp5MCRrflwfNyXy+HEd94oRDjwntWvLWuMQTpxgVjDn5SPGHlc0YHyJxycnd2Fc2cegxmV1LDl+ODcwrm0jQiTxEejpVkjTbOPQ4kCmGOTlagsYTp7gfIg09J+OJUy+47FryUrt5xMpmlIdInHPyC6xsGjDcteQFK5tx7Foyy8lR4InToA+R+OXkvuHQo5s5GSubmiTPJPLNyb3Docfh71rygpVNB3MyVjZ/k7JryQtWNi05medDpMHh0KM/ORkrm6J2LXnByqaDOVmHQ49e5mQkaOTkN3Dokf+uJS+er2xW1lzMyVHU/V3ZdDcnY2VT0q4lL16ubBZX3M7JSNCRzyRKeYj0FlY2kZN/QYJmdiZRPk8StF85GQkaORkrm7aczHbXkpfnBO3uyqavORkJuuuZRE67lrw4eegxO0MCdi156bQcW9lMzeZk7Fry4tihR+RkJGjLmUQfc3K0Q49OrGxmSsjJgyZo8SubqTJyMhI0jzOJ8llWNmX8RJhjcyZRPrEJ2vIQCTnZq0OP45Pydy15abZJ2qFHjmcS5TMfemT7fdn3h0hv+JmgU3zPJMon5tAj7zOJ8ok49FhZ534mUT72hx7xEOldfhx6FHMmUT7Ghx5d37XkZZPnEydpZxLlY3joUeCZRPm4HXr0aNeSF1ZPnArLUs8kysfm0KPlIRJ+FPxk7/55mwbCOI4HIQb+LCyIiY3TYepUcULk1AiJpRF0ShYPXdIoQ6gE7VIpUtaqUideQKu+kb45CkXK2fjS2Njxne/7eQv9qXbu8f2etRrWsulkr6VZshc9vt3kfJk1iU1S7IoTvZaNk3vRI+PkZsrZskmvZUPlWPTIRaQm23TRI2sSG26DRY+Mk13wcMsmaxJd0Fl3xYlxsjt0LZusSXSMZtEjvZaOqbRlk3GyPXQjaHotHaNr2aTX0jH6K07Fx8lcRLKPbtEjvZaO0Y2g6bV0jG7RYynjZHot7VHCCPrRM3otradb9Mg42TG6lk3WJDpGM4JmnOwY3aJH1iQ6RteySa+lYz5+yx5BsybRMTlaNh8/Z5zcWBu3bD5lTWKjaUfQD/daMk5ukgdH0E9eMk52gWYETa+lY9YsenzymnGyOzJH0K+etlpv6LV0SmbL5osWaxJdk9Gy+abFONk5GYseW4yTHfTPCLqV7LXkpcARqUWPLcbJbmp//ZwZg8+Mk93S+5IVg3cCbnlPDEAMQAxADEAMQAxADOoRdUU+47ZYjxhYZ+wd7Ih8vJPrQKxBDGyziEMpc8dAysMfe0KLGNhldORLWSQGd8LhWGgQA4u0L8/knYIxuONPL0QmYmCNaD6RsngM/uqPRAZiYIm9HwMp/yMGK7s/eyKNGFhhNgylIlyIfOZSdbiMRAoxMN/Nd1+uFHrnX8SJHB14t0JFDIx3vC9VZ+e9gk+VQ6kI44VYIQZmC65PpcL/viMKC37uSoV/tHpbJAYm6y4PpeJgOCvh2EFxdtkW94iBscbDA6mYXHXLf9k8mQfiN2JgqIupLxX7lx1Rjr3kv5jB7xdOYmCm0ZFU+NMbUaLe+ZlUhMMZMTBQ53xXKgbeWJRt57ufePO8IQaGia4myad3JKowS7557B8TA4PcegOp6B+LynSXibydXn8gBmZ4H4eJI54LUanO5X7ykLlLDOqXfGAPvFtRvZupnziZGBODWrWTh8a7lX41pj+e8KcXxKA2wfWJ7py3etH8RCqORsSgFsmPCcL4vdgK/b+i8w4x2LbxMCw6Rq7s1HJyFRCD7fJKGCOX/1t1hxhsl5cYI9cpmp8Sg7p4qzFy/Y77xKAe3v3D2JRqoEXsE4Oq6WMQCTMQg40196HwiYfC5hr6ihjwipgTPxiJQULZx0dLjo8clTpMHtZ/mNzjMLkOwdyc0VKf0VIB1g+aPQbNRkl9dvKDz04clf4IbSGy8RFaw23zk9Sr1CepgRDEwBRR6q/DB+qO6nFdBX+M+lu8vBZzec1YW7vK6nGV1Wj/XGyPyr/YPvn75kEMDFZ9zUVH3CMGRquw9EZSemOTaiqwfCqwbJMuxFuWUIg3FipiYIVZTD0m7ux5lOWivOrsTyIDMbBIhyJ9rBrSCsTggcYzYmCbReyzZAcFV27NWbnVOCzggwWIAYgBiAGIAYgBiAGIAYgBiAGIAYgBiAGIAYgBiMEv9u7YBkAgBoJgNx/Rf31shEiJbKGZDnza3MgAGSADZIAMkAEyQAbIABkgA2SADIgMiAyIDIgMiAyIDIgMiAyIDIgMiAyIDIgMiAyIDIgMiAyIDIgMiAyIDIgMiAyIDIgMiAy+PDi+zt88l8lABjKQgQyODGQwP9Y8GSwYa54MFow1TwYLxpongwVjzZPBgrHmyWDBWPNkwJsMODIgMiAyIDIgMiAyIDIgMrjZuXsdVYEwjON38+YJx5EI5xAGk1NiQQUNBY0QC2Oi0JiY2BoTKy9A443szZ11xm9ZzXqU3WXmV2iihV//hGFmRHunM9De1SKD9jIrAhZ0HSOkK73pMOeMBfn7sy36HuzBNPbzJBjT51mNfic1k4CBBUnhxKvNb/p+qsjAgGDsIjACHOT9Jp366+MEN7xKF2AMCDGdmhs+g2TSJ21GY4ZLwXDRUnFp6SyDMMEZc0IHkYMLfPYFGWR0YC1Flw9lEBldfKC7VjeDDr3rM1wIQtoJOa4ZX5nBMgEezKAxZLjBj1TOYIVrboOEAUOZUeUZDElqjIEHM4hS3JFM1M1giTI8onchQykWflEGU4aHM+jhriRSNYO5i63xumd5k0GcAMfvPeIQiunctnqNqY+9olVxBim9s1OcSNJ4tF5+IkiOPZ4ay3DitVvbzzxKXew5imbQzs9HfZbBIA2oNb4cEoY5dpYVZ+AQkWdij2czjz5LRsSc1S86Z48C7CyVzCAW93mPhLPhgEl9bBURHdkmpHH1GbwV2PEXFj1gBKA7jahEZELKmypmYDIA3YhO9SHNAlGBR6ciDqlXbQY+2QWkcUiPCWF+ODvgdSGFKmaw5c7pTNPEEe/RuSmkVbUZjJsphKDfpAe1Z81bjUiZqhn06cIaR0u6YLsQhhVnsLsvftGLjCEkimZgtuiCx7Dn0xUHQlJtBgyCY9Or9CFN1MygQVdM7M3LBlpSu9IMJMeil+lBmimZgUPXYuz4Nw6i8+ozMNv0QhyCoWQGC7q2unUWHUEaVJ4Bj+iVfAixihlwi64NILE2lWAQ1pVnsKCXyiCkKmaQUYnNzfn6BMK06gxSeq0OBF/FDFa3RksxlSkgjKrOYE6v1YEwVjGDDZXwIPVvHUONijNI6cUMCKaKGVhUwoI0+04ZLOjJ7LDfGfpFErgMgroZuFSmBekvlXG+JIPgDz3R2zLr4kj1DBIqBanxjTJIn7kL22EAdAaH9178mAxG9CTeiAPQGZyNh35MBgN6imafAzqDH5vBhJ4h8nGOm/4wy+ItU2fw/TN4oycIOY7yeL1p6xPGn5WBRf9v4GKvO/ql5w1+YAb0/xoMO/mipaePFM0g4pDY6LeeRVQ2gyEk3tCTyepmEELiE72moHAGzr3/3XV0BvXPIILUoY8MdQb1z2AFgb3RR/T0kQIZ3N1i1mY6g/pnUNzbOjfQawoKZMDvrVBlOgMFMmB3Xj5iOgN1MvhLH4j1QrMKGQQQlvfXG3QGNc4gvzlt4HWx19UZ1DiD9NaPbDk4SHQGNc5gdGOfuyUbceWtzqDGGUwgdT269OZjKxtCsHUG9c2ATEh+m84NOLa4l0Ho6QxqnMECO/mGTjRSCG5IHQihzqDGGZCPHZYObNpqzqdjSGxxGD6sdQZ1ziDiOGD52PELF3vu7HjpL0NnUOcMaBPgA8nmZH9SpjOodQY0KVCGdezTyzoUOoN6Z0DtjOESG85JarnyAUtnUO8MiCYxw6m807s6p2yok4G67EHHzzlzedfv9Hv0fekMNJ2BpjPQ/rFLBwIAAAAAgvytH6QY0gAN0AAN0AAN0AAN0AAN0AAN0AAN0AAN0AAN0AAN0AAN0AAN0IBpwDRgGjANmAZMA6YB04BpwDRgGjANmAZMA6YB04BpwDRgGjANmAZMA6YB04BpwDRgGjANmAZMA6YB04BpwDQgduubR20oAOD4ls+ShT2ZYlkoshTJCzaRGUykxPbCEEteQNSBgIBD9AASoh29d4IooXPckbvL9Zbee69LHlHyIU7iDwZLGBv8fjwDWjBYBFowWAQ6dQyWnK56sVsvS5WUMmkSy0RikWzJlHBKXJL6rO4quqdFqTTejcdVQyvySPz46do2Fdt/ms87VifF7iOvz+tNp9Pej5d4DI939kqfeXBghVEyxxk8rkkmUw5Mbjvah77HZnNqedlhSiW3D/Zepw8bB7V34svneaA3t27dvCkyJ3sF881bN0VisejW326C5fahSSQ65KSr0+6hY8cx9e1mfA9H2uGGdj26sZu17b5/9enLhWtXP7y69+HLp1fv3/ejb57eDdH0yUmxuL3d291Zh9CN1W6rUUv2tqurq2DV0nj59u3du3erR3dNazvag6F2w34cyCeX8/vT2lpy2Zxy3M4f5wMBhyOQf3nrydMn726/fPny3e15a2uO5bVlkBnczctgI5NZJHbk9/fzjmXHCdjtyQnYRCwK1Fard09ODYNEolAKlldc94OEIaRJmMVi8VxBQeIuldzuuhsYkBJNgggqbRYIebSUlHsmL/KB/FRyX6rXPuuvDwaDHa93kObxAIR5DMtiIAit+gY+mzS7367ofQWNpqBxaCS0kTIo288tiuHB0cnjr59/vPn8FSAQy3p+o99d1IhlS+Yls/gmSCQS3x7bCmvTB5iCUCGZ/XRD0We80+lIP1QoGAaNcQr83Kt7986duXgPHPcciGGQ/cRBRyC4wxdEhLQHYxge+CgkxGBWviBnhHVWhGEajQfr/b73Gfh2GAMhEIZzysokuDLU27RkzO+nNvXNSdNur2R3Wu9u1x7tZy3aRkPBdTaP5Hfkclq+fQckv1MK2u3x4KynVES9Pnv9OGiAYVJH6nJUaEvJgXXjqWFgcqYkK8cS130PMTaGToACmTkBJoOZ211yl+JylUqlJAiphVDeV8HYOFkvFWfVbqCtHY20/de7FjhmV2b3dp+/eMD7F4NBGATCsj6fT+v1tfMPs5OiS1JwpnrqsXWTMxwdHdUe1462ko4nIDDgIPNxzCpUu4vOJZBZNHdgTsa0K8flysimog077cwzXPFwkMmSJIpWbL49dBNGsHv3eCx76cOcwb1zvHMYDk81ZC7M3woL+BF1BGH7CpzFcIbEkU4nN38rjjBItfH48eOnAQ8dZXkMhLEMglqb0rgP4fQ76ygHk9wm4ferCW2U3AwdVY8OshBqycG6HF/IF4I77aEjdIQvVNmlqo4xhAJHzbikIIdZCEZxHEdQXY6EEQg5NQwSBacp0HNJXEqDjiNCJ06neclkAteE0szllt+PK/1ERaUibIQyHrfgqL44K7lt+towvVJ+OHjWpHScsmkrt/OaF294fzsPAGAQDix4B5k9hc3Wbo/0hEo+k2g0ISrGKYlqTmfcXrtLbSWXRaL5RUgkk4lNKdOGjvLISxrAQCYGL6xpVrmHlXK5oqJDRr1dMz1kFfXuZub1g3VLXW3A8RiKsOce7JEbu9fBcc+eBQ9QDm5VjWE+vRUBwyXgC0JCIcZYMUYhFITDxpxOB0EoAlXbouXbb+UGSzTa52EscIDD1mazjMPwOIZynM5qoCK0mphwKA6TB9XVFkKGBcYOUCAAvIACT4QGB+DToRyM60iEDN2hSy4PyuIcCaMIuMHgGT09DFLOVMKUchWD5cmYIPzqYq+XMJlcrplc7nYFg3W1Xzrz+yfxTSIuva9AsnK5R14/3kunFd4XgUecQWcl7PpWUiPZVpz/+PrS+Y8r5czAm/auQ+CEryOI0l5rj2x7+qb6jsSpiv48MLRIEpyjre1WTQwMzAdcBtIUlhK2sdo9K2lkIHMqZUpy2malEpSqrTDh9/QCUqTVVYdWn6Q3qCJ/E0GGWoTFopbGBuG9dJYHOscD/OBYrhMGwxUWzIdM6FEjqDCKoQKaLwQQYPDrR3BLLfnWQBmePRs9+naRZVkIZWELobd7cdRq3eMMYyNFRSIEobLCOB5tbG1R444A7I0/pzVnIBRGAAK+oNPS4phOTeU6Ko4qgdkApfT6rD47VKAIPNwjTw2D44ImpXGa7q/EgxWKkKpCkl6v4HTN6rQn6PYESyqVP6i0S+N2v10qR6GMh94ZFTKD9CD9POB4uksgpFF5eCjpUlz0wfNm5oVTIwEVRtqH+88zWp9P2p7WbBvbWX1sk5JItGx/QwvDgAhCrC0BBGIxQAD+ECQkErAQY7Vcfichk6U0qZSzpbBN5gp0CkogvNNNKkerfspoeZreJbshHY6sR3He+WgsagEQoX8MIBzCdeHwljD8d9RomlYDD9QwxgcohIKOguExO+t4NWa0WhuHj6q/ft+4wrIYAkGWmN6fwSCYNCgNaqFQGDJSWy0cRy3fvn8fhykDcPB/MogIwQVhvi4I1/JZHeVWGdVEH1bTMAvbKysrK8cBMFeW79vQU8Ng0alowWDRgsGiBYNFCwaLFgwWLRgs+sMuHQgAAAAAAPm/NkKDDdqgDdqgDdqgDdqgDdqgDdqgDdqgDbBnLy0JRGEYx98ZzS521e52IajzIMEwXmKgLBFxYSS5bGGrVtGuoPZ98i4Iks94Gwic4/v7BgMPw8v5K52B0hmo/5sBbi6Mmh3e7XXoDPD55Bk1Iy7bAM2gK6gbNQuKTYBn0NN6MMp2hdd3DJ8B/KqeCJZrBOjjiot+tTc9ESxW6oBkJA2WvzfKThc3YLmkSDYF9lwxyj7e0x3YcVK+bR2A+Y9loyxTD8ByC9K1fAR2fasnglWuWmCpJUd6sqtg7UujbFGu+mAbc/JHYs0FaxaNsoF3XgPbXReyfwL2/lowKvbu82A7ixJq5RAsaBgVb5UPsO10QgZwNufBOiWj4qv86IMdbMkQyYwLdGmCtsBPTmZHyzLC3inYndUJ2rP340ptsNWsI6Mt5PBrVhK0V7B1BsUmmLuWkLE4Symw1pVRcVJ4+QQ73pexzW2A+VV9X46RRgB2uCITWd8Fq53b+vu0zkMHbH7TkUkt7miCjqvQnOxmkhJBIr0N9qEJetqF5+SzPYlAE3Rc1fPhOTkCTdBxVXkenJOjc8ITtL4vT6eBOTkCTdBf7J3NalNRFIVvaWp/SLGCA1MQY2sDnQTaGISKipQMFEoddlCfIDP7BubFvUNp925uzr0nWevs9T1BhrnnY6+PFFcnd8LxO0tBz6Wgwbhd2Do5ASloVlyd3BW+gtaJEwoXfxydnIAUNCumTh72qwwMzsIpaBJMnbzr6+R0fAV9Xq6C5mBq6+RelY2tA504gTH2dHICUtCsXDs6OQEpaFbublydnJ996315IQW9bqbfTJ2c9HIsBU3K+MHSySdH1ZrwFbROnNaDf4i0V62Z/tBU0CPhk10nb1fZ8BX0rhT0Zvj429HJG6FnK2i9L+dl/NPUyf0qgYwK+u9cH48ZuTIPkZJ0shQ0K5c/Murk9gpaK5sZMHctn/L+uAJgx1TQWtnsnpmpkw8rEI5OLAWtlc1umdw7OhmHPZ04ZWb61dHJUGxLQRtkPkQ6HVRw7LzSiZNB1l1LSPqmgtaJUxad/OIA6U9BEwWtlc02TM1DpFonA1MraJ04dcn44fvGdfJytLJpkX/XkoBDU0HrfTlFJ2O+HDdV0FrZzLlrSUPvpU6ccu1aUjE41YlThl3Lio5oK5ujEcquJRb1iZMUdNquJa5OTlPQ9c9X6LGTXUsYnZyqoBV67GDXEvflWCub/4O3a4lF/b4sBd1GJ38A1Mla2XxMUJ2slc08fGbTyY1R6BFg1xILrWyuvmsJr5PTFLRWNr1dS1qdrBMnpl1LLLSy+YQLep2slc32FKGTLRR6bKuToQ6RHiMF7ZGukxkOkVJQ6LFtJpFWJ2tlUzpZK5vSyW0VdNSVzXJ1slY2W+5anhWikztU0EW/L1+fF66TpaCbHCIF0MkKPUonp9KLoqAj6eTuVjZLU9C3C8BdSyzKV9DxdLIUtLFrGVEnS0E3ySQG0MlpoccyVzYnv+B3LbEoMfTIsWuJRXGhx7F0shS0k0kM/nIcTUHf3Ugnhw891plEul1LLApQ0AiZRH7YQ48gmUR+mEOPOJlEfmhDj1iZRH4oVzbrXUuwTCI/A7rQI2QmkZ+9t0wnTvYhknRyqNAjciaRn3plkyL0OPsEnUnkhyH0ONEhkk+U0KN08hIihB55Mon84IYei9+1xKL/BvHEKcSuJRb7cCubOkTKia+goU6cWDOJ/CCFHokzifwcDjFOnLgzifxsvQYIPfJnEvnZ+IlTGZlEftJCj8okFsfKK5vKJBbJyiubyiSWyUonTtq1LJeGoUftWpZOw9Cjdi0LZ1noUZnEIDwXetSuZSDclU3p5Fg4K5vSycHwQo/atQyGF3pUJjEYzsqmdi2D4a1sKpMYDE9BK5MYDC/0qExiMJyVTWUSg+EpaGUSg+EpaOnkYHgrm9q1DIYTepRODoa3sqlMYjC80KN0cjAcBa1MYjC80KN0cjC80KN0cjCahB6vlEksn2UK+lI6OQTeyqYyicGoFbSzsjn7ol3LQNihx/m9Mon/2rt3G4BCGIaiecWjo6CgoIP9lySIAvHZwPfMkCqWbDGvlk3iZD13BE2vpaQ9guZzLGu1bBInS5stm8wkqhsRNL2WsNyYSYSLlZlEHEOPic+xLI+gmUmEWUnBj4A4Wd738zi2DrfdWF5oQu4bAAAAAElFTkSuQmCC" alt="mirai logo" align="right" width="120" /></a></p>
<ol style="list-style-type: decimal">
<li><a href="#example-1-compute-intensive-operations">Example 1:
Compute-intensive Operations</a></li>
<li><a href="#example-2-io-bound-operations">Example 2: I/O-bound
Operations</a></li>
<li><a href="#example-3-resilient-pipelines">Example 3: Resilient
Pipelines</a></li>
<li><a href="#daemons-local-persistent-processes">Daemons: Local
Persistent Processes</a></li>
<li><a href="#distributed-computing-remote-daemons">Distributed
Computing: Remote Daemons</a></li>
<li><a href="#distributed-computing-launching-daemons">Distributed
Computing: Launching Daemons</a></li>
<li><a href="#distributed-computing-tls-secure-connections">Distributed
Computing: TLS Secure Connections</a></li>
<li><a href="#compute-profiles">Compute Profiles</a></li>
<li><a href="#errors-interrupts-and-timeouts">Errors, Interrupts and
Timeouts</a></li>
<li><a href="#parallel-clusters">Parallel Clusters</a></li>
</ol>
</div>
<div id="example-1-compute-intensive-operations" class="section level3">
<h3>Example 1: Compute-intensive Operations</h3>
<p>Use case: minimise execution times by performing long-running tasks
concurrently in separate processes.</p>
<p>Multiple long computes (model fits etc.) can be performed in parallel
on available computing cores.</p>
<p>Use <code>mirai()</code> to evaluate an expression asynchronously in
a separate, clean R process.</p>
<p>A ‘mirai’ object is returned immediately.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(mirai)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mirai</span>(</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  {</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    res <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n) <span class="sc">+</span> m</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    res <span class="sc">/</span> <span class="fu">rev</span>(res)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  },</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  <span class="at">m =</span> <span class="fu">runif</span>(<span class="dv">1</span>),</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>  <span class="at">n =</span> <span class="fl">1e8</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>m</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co">#&gt; &lt; mirai &gt;</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="co">#&gt;  - $data for evaluated result</span></span></code></pre></div>
<p>Above, all specified <code>name = value</code> pairs are passed
through to the ‘mirai’.</p>
<p>The ‘mirai’ yields an ‘unresolved’ logical NA whilst the async
operation is ongoing.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>m<span class="sc">$</span>data</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#&gt; &#39;unresolved&#39; logi NA</span></span></code></pre></div>
<p>Upon completion, the ‘mirai’ resolves automatically to the evaluated
result.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>m<span class="sc">$</span>data <span class="sc">|&gt;</span> <span class="fu">str</span>()</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt;  num [1:100000000] 0.429 -0.143 -0.313 0.379 0.739 ...</span></span></code></pre></div>
<p>Alternatively, explicitly call and wait for the result using
<code>call_mirai()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">call_mirai</span>(m)<span class="sc">$</span>data <span class="sc">|&gt;</span> <span class="fu">str</span>()</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt;  num [1:100000000] 0.429 -0.143 -0.313 0.379 0.739 ...</span></span></code></pre></div>
<p>For easy programmatic use of <code>mirai()</code>, ‘.expr’ accepts a
pre-constructed language object, and also a list of named arguments
passed via ‘.args’. So, the following would be equivalent to the
above:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>expr <span class="ot">&lt;-</span> <span class="fu">quote</span>({</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n) <span class="sc">+</span> m</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  res <span class="sc">/</span> <span class="fu">rev</span>(res)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>})</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>args <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">m =</span> <span class="fu">runif</span>(<span class="dv">1</span>), <span class="at">n =</span> <span class="fl">1e8</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mirai</span>(<span class="at">.expr =</span> expr, <span class="at">.args =</span> args)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="fu">call_mirai</span>(m)<span class="sc">$</span>data <span class="sc">|&gt;</span> <span class="fu">str</span>()</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt;  num [1:100000000] -0.253 5.661 -0.135 1.352 0.176 ...</span></span></code></pre></div>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
<div id="example-2-io-bound-operations" class="section level3">
<h3>Example 2: I/O-bound Operations</h3>
<p>Use case: ensure execution flow of the main process is not
blocked.</p>
<p>High-frequency real-time data cannot be written to file/database
synchronously without disrupting the execution flow.</p>
<p>Cache data in memory and use <code>mirai()</code> to perform periodic
write operations concurrently in a separate process.</p>
<p>Below, ‘.args’ is used to pass a list of objects already present in
the calling environment to the mirai by name. This is an alternative use
of ‘.args’, and may be combined with <code>...</code> to also pass in
<code>name = value</code> pairs.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">library</span>(mirai)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="fl">1e6</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mirai</span>(<span class="fu">write.csv</span>(x, <span class="at">file =</span> file), <span class="at">.args =</span> <span class="fu">list</span>(x, file))</span></code></pre></div>
<p>A ‘mirai’ object is returned immediately.</p>
<p><code>unresolved()</code> may be used in control flow statements to
perform actions which depend on resolution of the ‘mirai’, both before
and after.</p>
<p>This means there is no need to actually wait (block) for a ‘mirai’ to
resolve, as the example below demonstrates.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># unresolved() queries for resolution itself so no need to use it again within the while loop</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="cf">while</span> (<span class="fu">unresolved</span>(m)) {</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;while unresolved</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="fl">0.5</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>}</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt; while unresolved</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt; while unresolved</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt; while unresolved</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Write complete:&quot;</span>, <span class="fu">is.null</span>(m<span class="sc">$</span>data))</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; Write complete: TRUE</span></span></code></pre></div>
<p>Now actions which depend on the resolution may be processed, for
example the next write.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
<div id="example-3-resilient-pipelines" class="section level3">
<h3>Example 3: Resilient Pipelines</h3>
<p>Use case: isolating code that can potentially fail in a separate
process to ensure continued uptime.</p>
<p>As part of a data science / machine learning pipeline, iterations of
model training may periodically fail for stochastic and uncontrollable
reasons (e.g. buggy memory management on graphics cards).</p>
<p>Running each iteration in a ‘mirai’ isolates this
potentially-problematic code such that even if it does fail, it does not
bring down the entire pipeline.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">library</span>(mirai)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>run_iteration <span class="ot">&lt;-</span> <span class="cf">function</span>(i) {</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">runif</span>(<span class="dv">1</span>) <span class="sc">&lt;</span> <span class="fl">0.1</span>) <span class="fu">stop</span>(<span class="st">&quot;random error</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>) <span class="co"># simulates a stochastic error rate</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="fu">sprintf</span>(<span class="st">&quot;iteration %d successful</span><span class="sc">\n</span><span class="st">&quot;</span>, i)</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>}</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mirai</span>(<span class="fu">run_iteration</span>(i), <span class="at">.args =</span> <span class="fu">list</span>(run_iteration, i))</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  <span class="cf">while</span> (<span class="fu">is_error_value</span>(<span class="fu">call_mirai</span>(m)<span class="sc">$</span>data)) {</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>    <span class="fu">cat</span>(m<span class="sc">$</span>data)</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>    m <span class="ot">&lt;-</span> <span class="fu">mirai</span>(<span class="fu">run_iteration</span>(i), <span class="at">.args =</span> <span class="fu">list</span>(run_iteration, i))</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>  }</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>  <span class="fu">cat</span>(m<span class="sc">$</span>data)</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>}</span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="co">#&gt; iteration 1 successful</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="co">#&gt; iteration 2 successful</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="co">#&gt; iteration 3 successful</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="co">#&gt; iteration 4 successful</span></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a><span class="co">#&gt; iteration 5 successful</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a><span class="co">#&gt; iteration 6 successful</span></span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a><span class="co">#&gt; iteration 7 successful</span></span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a><span class="co">#&gt; iteration 8 successful</span></span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a><span class="co">#&gt; iteration 9 successful</span></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a><span class="co">#&gt; Error: random error</span></span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a><span class="co">#&gt; iteration 10 successful</span></span></code></pre></div>
<p>Further, by testing the return value of each ‘mirai’ for errors,
error-handling code is then able to automate recovery and re-attempts,
as in the above example. Further details on <a href="#errors-interrupts-and-timeouts">error handling</a> can be found
in the section below.</p>
<p>The end result is a resilient and fault-tolerant pipeline that
minimises downtime by eliminating interruptions of long computes.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
<div id="daemons-local-persistent-processes" class="section level3">
<h3>Daemons: Local Persistent Processes</h3>
<p>Daemons, or persistent background processes, may be set to receive
‘mirai’ requests.</p>
<p>This is potentially more efficient as new processes no longer need to
be created on an <em>ad hoc</em> basis.</p>
<div id="with-dispatcher-default" class="section level4">
<h4>With Dispatcher (default)</h4>
<p>Call <code>daemons()</code> specifying the number of daemons to
launch.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="dv">6</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>To view the current status, <code>status()</code> provides the number
of active connections along with a matrix of statistics for each
daemon.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">status</span>()</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; $connections</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt; $daemons</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt;                                     i online instance assigned complete</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt; abstract://bdc263bb75d83a31498a2e50 1      1        1        0        0</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt; abstract://ed5e9d9990f482da6f45a318 2      1        1        0        0</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt; abstract://c44bdcf8c1fd2d5afe9adf19 3      1        1        0        0</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; abstract://40099546114d12e82872433c 4      1        1        0        0</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; abstract://5ae9f1fffac33bec2d1a6a67 5      1        1        0        0</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt; abstract://ab50d8bd9397ab4b41c5c562 6      1        1        0        0</span></span></code></pre></div>
<p>The default <code>dispatcher = TRUE</code> creates a
<code>dispatcher()</code> background process that connects to individual
daemon processes on the local machine. This ensures that tasks are
dispatched efficiently on a first-in first-out (FIFO) basis to daemons
for processing. Tasks are queued at the dispatcher and sent to a daemon
as soon as it can accept the task for immediate execution.</p>
<p>Dispatcher uses synchronisation primitives from <a href="https://doi.org/10.5281/zenodo.7903429"><code>nanonext</code></a>,
waiting upon rather than polling for tasks, which is efficient both in
terms of consuming no resources while waiting, and also being fully
synchronised with events (having no latency).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="dv">0</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Set the number of daemons to zero to reset. This reverts to the
default of creating a new background process for each ‘mirai’
request.</p>
</div>
<div id="without-dispatcher" class="section level4">
<h4>Without Dispatcher</h4>
<p>Alternatively, specifying <code>dispatcher = FALSE</code>, the
background daemons connect directly to the host process.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="dv">6</span>, <span class="at">dispatcher =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>Requesting the status now shows 6 connections, along with the host
URL at <code>$daemons</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">status</span>()</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">#&gt; $connections</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt; $daemons</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;abstract://b218ce6c1159751a071d5d9e&quot;</span></span></code></pre></div>
<p>This implementation sends tasks immediately, and ensures that tasks
are evenly-distributed amongst daemons. This means that optimal
scheduling is not guaranteed as the duration of tasks cannot be known
<em>a priori</em>. As an example, tasks could be queued at a daemon
behind a long-running task, whilst other daemons are idle having already
completed their tasks.</p>
<p>The advantage of this approach is that it is low-level and does not
require an additional dispatcher process. It is well-suited to working
with similar-length tasks, or where the number of concurrent tasks
typically does not exceed available daemons.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="dv">0</span>)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Set the number of daemons to zero to reset.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
</div>
<div id="distributed-computing-remote-daemons" class="section level3">
<h3>Distributed Computing: Remote Daemons</h3>
<p>The daemons interface may also be used to send tasks for computation
to remote daemon processes on the network.</p>
<p>Call <code>daemons()</code> specifying ‘url’ as a character string
such as: ‘tcp://10.75.32.70:5555’ at which daemon processes should
connect to.</p>
<p>IPv6 addresses are also supported and must be enclosed in square
brackets <code>[]</code> to avoid confusion with the final colon
separating the port. For example, port 5555 on the IPv6 address
<code>::ffff:a6f:50d</code> would be specified as
<code>tcp://[::ffff:a6f:50d]:5555</code>.</p>
<p>For options on actually launching the daemons, please see the next
section.</p>
<div id="connecting-to-remote-daemons-through-dispatcher" class="section level4">
<h4>Connecting to Remote Daemons Through Dispatcher</h4>
<p>The default <code>dispatcher = TRUE</code> creates a background
<code>dispatcher()</code> process on the local machine, which listens to
a vector of URLs that remote <code>daemon()</code> processes dial in to,
with each daemon having its own unique URL.</p>
<p>It is recommended to use a websocket URL starting <code>ws://</code>
instead of TCP in this scenario (used interchangeably with
<code>tcp://</code>). A websocket URL supports a path after the port
number, which can be made unique for each daemon. In this way a
dispatcher can connect to an arbitrary number of daemons over a single
port.</p>
<p>Supplying a vector of URLs allows the use of arbitrary port numbers /
paths. ‘n’ does not need to be specified if it can be inferred from the
length of the ‘url’ vector, for example:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="at">url =</span> <span class="fu">c</span>(<span class="st">&quot;ws://10.75.32.70:5566/cpu&quot;</span>, <span class="st">&quot;ws://10.75.32.70:5566/gpu&quot;</span>, <span class="st">&quot;ws://10.75.32.70:7788/1&quot;</span>))</span></code></pre></div>
<p>Alternatively, below a single URL is supplied, along with
<code>n = 4</code> to specify that the dispatcher should listen at 4
URLs. In such a case, an integer sequence is automatically appended to
the path <code>/1</code> through <code>/4</code> to produce the
URLs.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="at">n =</span> <span class="dv">4</span>, <span class="at">url =</span> <span class="st">&quot;ws://10.75.32.70:5555&quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>Requesting status on the host machine:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">status</span>()</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; $connections</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co">#&gt; $daemons</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co">#&gt;                          i online instance assigned complete</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="co">#&gt; ws://10.75.32.70:5555/1 1      0        0        0        0</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="co">#&gt; ws://10.75.32.70:5555/2 2      0        0        0        0</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="co">#&gt; ws://10.75.32.70:5555/3 3      0        0        0        0</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="co">#&gt; ws://10.75.32.70:5555/4 4      0        0        0        0</span></span></code></pre></div>
<p>As per the local case, <code>$connections</code> shows the single
connection to dispatcher, however <code>$daemons</code> now provides a
matrix of statistics for the remote daemons.</p>
<ul>
<li><code>i</code> index number.</li>
<li><code>online</code> shows as 1 when there is an active connection,
or else 0 if a daemon has yet to connect or has disconnected.</li>
<li><code>instance</code> increments by 1 every time there is a new
connection at a URL. This counter is designed to track new daemon
instances connecting after previous ones have ended (due to time-outs
etc.). The count becomes negative immediately after a URL is regenerated
by <code>saisei()</code>, but increments again once a new daemon
connects.</li>
<li><code>assigned</code> shows the cumulative number of tasks assigned
to the daemon.</li>
<li><code>complete</code> shows the cumulative number of tasks completed
by the daemon.</li>
</ul>
<p>Dispatcher automatically adjusts to the number of daemons actually
connected. Hence it is possible to dynamically scale up or down the
number of daemons according to requirements (limited to the ‘n’ URLs
assigned).</p>
<p>To reset all connections and revert to default behaviour:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="dv">0</span>)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Closing the connection causes the dispatcher to exit automatically,
and in turn all connected daemons when their respective connections with
the dispatcher are terminated.</p>
</div>
<div id="connecting-to-remote-daemons-directly" class="section level4">
<h4>Connecting to Remote Daemons Directly</h4>
<p>By specifying <code>dispatcher = FALSE</code>, remote daemons connect
directly to the host process. The host listens at a single URL, and
distributes tasks to all connected daemons.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="at">url =</span> <span class="st">&quot;tcp://10.75.32.70:0&quot;</span>, <span class="at">dispatcher =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;tcp://10.75.32.70:40335&quot;</span></span></code></pre></div>
<p>Note that above, the port number is specified as zero. This is a
wildcard value that will automatically cause a free ephemeral port to be
assigned. The actual assigned port is provided in the return value of
the call, or it may be queried at any time via
<code>status()</code>.</p>
<p>The number of daemons connecting to the host URL is not limited and
network resources may be added or removed at any time, with tasks
automatically distributed to all connected daemons.</p>
<p><code>$connections</code> will show the actual number of connected
daemons.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">status</span>()</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#&gt; $connections</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="co">#&gt; $daemons</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;tcp://10.75.32.70:40335&quot;</span></span></code></pre></div>
<p>To reset all connections and revert to default behaviour:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="dv">0</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>This causes all connected daemons to exit automatically.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
</div>
<div id="distributed-computing-launching-daemons" class="section level3">
<h3>Distributed Computing: Launching Daemons</h3>
<p>To launch remote daemons, supply a remote launch configuration to the
‘remote’ argument of <code>daemons()</code> when setting up daemons, or
<code>launch_remote()</code> at any time afterwards.</p>
<p><code>ssh_config()</code> may be used to generate a remote launch
configuration if there is SSH access to the remote machine, or else
<code>remote_config()</code> provides a flexible method for generating a
configuration involving a custom resource manager / application.</p>
<div id="ssh-direct-connection" class="section level4">
<h4>SSH Direct Connection</h4>
<p>The first example below launches 4 daemons on the machine 10.75.32.90
(using the default SSH port of 22 as this was not specified), connecting
back to the dispatcher URLs:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">daemons</span>(</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">4</span>,</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">&quot;ws://10.75.32.70:5555&quot;</span>,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>  <span class="at">remote =</span> <span class="fu">ssh_config</span>(<span class="at">remotes =</span> <span class="st">&quot;ssh://10.75.32.90&quot;</span>)</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>)</span></code></pre></div>
<p>The second example below launches one daemon on each of 10.75.32.90
and 10.75.32.91 using the custom SSH port of 222:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">daemons</span>(</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">2</span>,</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">&quot;ws://10.75.32.70:5555&quot;</span>,</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  <span class="at">remote =</span> <span class="fu">ssh_config</span>(<span class="fu">c</span>(<span class="st">&quot;ssh://10.75.32.90:222&quot;</span>, <span class="st">&quot;ssh://10.75.32.91:222&quot;</span>))</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>)</span></code></pre></div>
<p>In the above examples, as the remote daemons connect back directly,
port 5555 on the local machine must be open to incoming connections from
the remote addresses.</p>
</div>
<div id="ssh-tunnelling" class="section level4">
<h4>SSH Tunnelling</h4>
<p>Use of SSH tunnelling provides a convenient way to launch remote
daemons without requiring the remote machine to be able to access the
host. Often firewall configurations or security policies may prevent
opening a port to accept outside connections.</p>
<p>In these cases SSH tunnelling offers a solution by creating a tunnel
once the initial SSH connection is made. For simplicity, this SSH
tunnelling implementation uses the same port on both the side of the
host and that of the corresponding node. SSH key-based authentication
must also already be in place.</p>
<p>Tunnelling requires the hostname for ‘url’ specified when setting up
daemons to be either ‘localhost’ or ‘127.0.0.1’. This is as the tunnel
is created between localhost:port or equivalently 127.0.0.1:port on each
machine. The host listens to its localhost:port and the remotes each
dial into localhost:port on their own respective machines.</p>
<p>The below example launches 2 nodes on the remote machine 10.75.32.90
using SSH tunnelling over port 5555 (‘url’ hostname is specified as
‘localhost’):</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">daemons</span>(</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">&quot;tcp://localhost:5555&quot;</span>,</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>  <span class="at">remote =</span> <span class="fu">ssh_config</span>(</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>    <span class="at">remotes =</span> <span class="fu">c</span>(<span class="st">&quot;ssh://10.75.32.90&quot;</span>, <span class="st">&quot;ssh://10.75.32.90&quot;</span>),</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>    <span class="at">tunnel =</span> <span class="cn">TRUE</span></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>  )</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="manual-deployment" class="section level4">
<h4>Manual Deployment</h4>
<p>As an alternative to automated launches, calling
<code>launch_remote()</code> without specifying ‘remote’ may be used to
return the shell commands for deploying daemons manually. The printed
return values may be copy / pasted directly to a remote machine.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">url =</span> <span class="st">&quot;tcp://[::1]:0&quot;</span>)</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="fu">launch_remote</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="co">#&gt; [1]</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="co">#&gt; Rscript -e &quot;mirai::daemon(&#39;tcp://[::1]:42137&#39;,rs=c(10407,1320176720,1130179601,-655743330,-1105923449,966660380,999169901))&quot;</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="co">#&gt; [2]</span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="co">#&gt; Rscript -e &quot;mirai::daemon(&#39;tcp://[::1]:45537&#39;,rs=c(10407,747692941,2067534052,-338831590,-741000662,1038403359,519255658))&quot;</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="fu">daemons</span>(<span class="dv">0</span>)</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Note that <code>daemons()</code> should be set up on the host machine
before launching <code>daemon()</code> on remote resources, otherwise
the daemon instances will exit if a connection is not immediately
available. Alternatively, specifying the argument
<code>asyncdial = TRUE</code> will allow daemons to wait (indefinitely)
for a connection to become available.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
</div>
<div id="distributed-computing-tls-secure-connections" class="section level3">
<h3>Distributed Computing: TLS Secure Connections</h3>
<p>TLS is available as an option to secure communications from the local
machine to remote daemons.</p>
<div id="zero-configuration" class="section level4">
<h4>Zero-configuration</h4>
<p>An automatic zero-configuration default is implemented. Simply
specify a secure URL of the form <code>wss://</code> or
<code>tls+tcp://</code> when setting daemons. For example, on the IPv6
loopback address:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">daemons</span>(<span class="at">n =</span> <span class="dv">4</span>, <span class="at">url =</span> <span class="st">&quot;wss://[::1]:5555&quot;</span>)</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>Single-use keys and certificates are automatically generated and
configured, without requiring any further intervention. The private key
is always retained on the host machine and never transmitted.</p>
<p>The generated self-signed certificate is available via
<code>launch_remote()</code>. This function conveniently constructs the
full shell command to launch a daemon, including the correctly specified
‘tls’ argument to <code>daemon()</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">launch_remote</span>(<span class="dv">1</span>)</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co">#&gt; [1]</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="co">#&gt; Rscript -e &quot;mirai::daemon(&#39;wss://[::1]:5555/1&#39;,tls=c(&#39;-----</span><span class="re">BEGIN</span><span class="co"> CERTIFICATE-----</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="co">#&gt; MIIFLTCCAxWgAwIBAgIBATANBgkqhkiG9w0BAQsFADAuMQwwCgYDVQQDDAM6OjEx</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="co">#&gt; ETAPBgNVBAoMCE5hbm9uZXh0MQswCQYDVQQGEwJKUDAeFw0wMTAxMDEwMDAwMDBa</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a><span class="co">#&gt; Fw0zMDEyMzEyMzU5NTlaMC4xDDAKBgNVBAMMAzo6MTERMA8GA1UECgwITmFub25l</span></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="co">#&gt; eHQxCzAJBgNVBAYTAkpQMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="co">#&gt; 1KH8sXr0C3xnLBmb/n8V/2uUAw69E0TUgmtZOQqOSFmmu5q3gs/cv2fhEftyTEP2</span></span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a><span class="co">#&gt; EhlscB0KsHwbjGal4ykdt9zIA14oXw9FOFhDm8Ec7oEvuep06sS/scBi1MGSGfVj</span></span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a><span class="co">#&gt; KizQ2eR0FHoXs1s4019dObOagy5AZlao8JxsK6guT7bvhPuObaABXPQScCD+41ZF</span></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="co">#&gt; A17V4RYBHpyFi5NKZ4GE9kmC+vxYs8sBnmxXyQ/nbYyRqklI8XzW355atToZtxVV</span></span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a><span class="co">#&gt; UOrSWjVAmiePGWCh0e3Fxv6JlvbtU2nzaNdXUbsTNbkHymBBTvgq1ndF4z/0u6kl</span></span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a><span class="co">#&gt; 0PLejRtAjG+C8xaoOBdBxhXL8iU2EXFi/aOU6Hq8SC7D1nm2lA6j388tzzH8x+Nw</span></span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a><span class="co">#&gt; PIEozxD09+RHjLibo/Ix56DJ8nxB+7y3GDupm7J6ubNREWlH/T/3KA0mrk9Xo4Tc</span></span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a><span class="co">#&gt; nVS9eWlPBZwGdzSwTJVHfTymtH+mgzdwj369se4aE6vazKQd56xGEALcODHqkSpY</span></span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a><span class="co">#&gt; z2wdqnkS70zWS9w8HdCKsARvmypVkUPR1asG0WgmPZC4/DU744tX7fo6OWSrY/6t</span></span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a><span class="co">#&gt; pBSXp+Ei35ig0tdppSfKMfnrFfceD0HPvzM9hhbr4fiTvNvVs8C1l6HJOJu3f6jv</span></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="co">#&gt; JxRS5fw/xjVPVVeFpKZKVD3cexbfIhSRFW+Ba3WwsN8CAwEAAaNWMFQwEgYDVR0T</span></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a><span class="co">#&gt; AQH/BAgwBgEB/wIBADAdBgNVHQ4EFgQU4K0/3fDKyK3Nc9DWm5V8iYSCv7UwHwYD</span></span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a><span class="co">#&gt; VR0jBBgwFoAU4K0/3fDKyK3Nc9DWm5V8iYSCv7UwDQYJKoZIhvcNAQELBQADggIB</span></span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a><span class="co">#&gt; AIat9NuetY37GZwiKWyfUQfKITWQ7qYGpZvVmKaKdg+6YTwAMNseX86BoO61deuo</span></span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a><span class="co">#&gt; a6euyXDMgM2lLqSyJyGgtcW5hH/aohTPa3xC1bl4M8OeVGgpbn9RGof7BDeM8qqI</span></span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a><span class="co">#&gt; 0+471BgXZP1TYmSJwb7B4VrNwrn6buFQXC9SQLUIpno0QTVNrYDriKQMNj/wgB7E</span></span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a><span class="co">#&gt; vBJiFYuZcduinqe2PQafeNrhYtC4109QUS09jjBGjshmbiX3t9BQhpBksG+OPpBE</span></span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a><span class="co">#&gt; F7JjpkdukYRlEyVHL6vEEu2EE2SVVgB9twIiEIm0MjkTO7z6Mx1zmSaRgTBSZCy0</span></span>
<span id="cb27-26"><a href="#cb27-26" tabindex="-1"></a><span class="co">#&gt; lJ6CttUB1HdPbKCdx8OrVo4tDPq++0kP9LZoiXZ83JrqsPPEKSVz+ElUwBCnmulp</span></span>
<span id="cb27-27"><a href="#cb27-27" tabindex="-1"></a><span class="co">#&gt; G4R9q3Nhk+1gnQf7lXvv4QiV3YaDSveaqZmobZsWmKcltNSVKFnTZNUr5W6VzKXB</span></span>
<span id="cb27-28"><a href="#cb27-28" tabindex="-1"></a><span class="co">#&gt; gUEjDzkrWISUBLOZVJ2nXGm73pwoKrYSLD39dn55xRMQtSA4nHg4my/F2ZIOrO9S</span></span>
<span id="cb27-29"><a href="#cb27-29" tabindex="-1"></a><span class="co">#&gt; GHt24yjtttfla6ADQKeVCr+fZ52PmEF+uhrSyr+YXkf/T6WwcR6cbGXYDygNIdkj</span></span>
<span id="cb27-30"><a href="#cb27-30" tabindex="-1"></a><span class="co">#&gt; YB4uaL2smWSVJEVs/Yx63/X4/U8AuJL4h/h4LJnkUMepUq0LHPuG6panPnHwqNpD</span></span>
<span id="cb27-31"><a href="#cb27-31" tabindex="-1"></a><span class="co">#&gt; Qn2QBvS6E2jKimoIDLk80QV78QiGPgCXrf/uZz0FLfRD</span></span>
<span id="cb27-32"><a href="#cb27-32" tabindex="-1"></a><span class="co">#&gt; -----</span><span class="re">END</span><span class="co"> CERTIFICATE-----</span></span>
<span id="cb27-33"><a href="#cb27-33" tabindex="-1"></a><span class="co">#&gt; &#39;,&#39;&#39;),rs=c(10407,-1832716330,1686918239,-116956396,772168453,-2001001470,582086555))&quot;</span></span></code></pre></div>
<p>The printed value may be deployed directly on a remote machine.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
<div id="ca-signed-certificates" class="section level4">
<h4>CA Signed Certificates</h4>
<p>As an alternative to the zero-configuration default, a certificate
may also be generated via a Certificate Signing Request (CSR) to a
Certificate Authority (CA), which may be a public CA or a CA internal to
an organisation.</p>
<ol style="list-style-type: decimal">
<li>Generate a private key and CSR. The following resources describe how
to do so:</li>
</ol>
<ul>
<li>using Mbed TLS: <a href="https://mbed-tls.readthedocs.io/en/latest/kb/how-to/generate-a-certificate-request-csr/" class="uri">https://mbed-tls.readthedocs.io/en/latest/kb/how-to/generate-a-certificate-request-csr/</a></li>
<li>using OpenSSL: <a href="https://www.feistyduck.com/library/openssl-cookbook/online/" class="uri">https://www.feistyduck.com/library/openssl-cookbook/online/</a>
(Chapter 1.2 Key and Certificate Management)</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Provide the generated CSR to the CA for it to sign a new TLS
certificate.</li>
</ol>
<ul>
<li>The common name (CN) of the certificate must be identical to the
hostname or IP address actually used for the connection as it is
verified, and will fail if not the same.</li>
<li>The received certificate should comprise a block of cipher text
between the markers <code>-----BEGIN CERTIFICATE-----</code> and
<code>-----END CERTIFICATE-----</code>. Make sure to request the
certificate in the PEM format. If only available in other formats, the
TLS library used should usually provide conversion utilities.</li>
<li>Check also that the private key is a block of cipher text between
the markers <code>-----BEGIN PRIVATE KEY-----</code> and
<code>-----END PRIVATE KEY-----</code>.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>When setting daemons, the TLS certificate and private key should be
provided to the ‘tls’ argument of <code>daemons()</code>.</li>
</ol>
<ul>
<li>If the certificate and private key have been imported as character
strings <code>cert</code> and <code>key</code> respectively, then the
‘tls’ argument may be specified as the character vector
<code>c(cert, key)</code>.</li>
<li>Alternatively, the certificate may be copied to a new text file,
with the private key appended, in which case the path/filename of this
file may be provided to the ‘tls’ argument.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>When launching daemons, the certificate chain to the CA should be
supplied to the ‘tls’ argument of <code>daemon()</code> or
<code>launch_remote()</code>.</li>
</ol>
<ul>
<li>The certificate chain should comprise multiple certificates, each
between <code>-----BEGIN CERTIFICATE-----</code> and
<code>-----END CERTIFICATE-----</code> markers. The first one should be
the newly-generated TLS certificate, the same supplied to
<code>daemons()</code>, and the final one should be a CA root
certificate.</li>
<li>These are the only certificates required if the certificate was
signed directly by a CA. If not, then the intermediate certificates
should be included in a certificate chain that starts with the TLS
certificate and ends with the certificate of the CA.</li>
<li>If these are concatenated together as a single character string
<code>certchain</code>, then the character vector comprising this and an
empty character string <code>c(certchain, &quot;&quot;)</code> may be supplied to
the relevant ‘tls’ argument.</li>
<li>Alternatively, if these are written to a file (and the file
replicated on the remote machines), then the ‘tls’ argument may also be
specified as a path/filename (assuming these are the same on each
machine).</li>
</ul>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
</div>
<div id="compute-profiles" class="section level3">
<h3>Compute Profiles</h3>
<p>The <code>daemons()</code> interface also allows the specification of
compute profiles for managing tasks with heterogeneous compute
requirements:</p>
<ul>
<li>send tasks to different daemons or clusters of daemons with the
appropriate specifications (in terms of CPUs / memory / GPU /
accelerators etc.)</li>
<li>split tasks between local and remote computation</li>
</ul>
<p>Simply specify the argument <code>.compute</code> when calling
<code>daemons()</code> with a profile name (which is ‘default’ for the
default profile). The daemons settings are saved under the named
profile.</p>
<p>To create a ‘mirai’ task using a specific compute profile, specify
the ‘.compute’ argument to <code>mirai()</code>, which defaults to the
‘default’ compute profile.</p>
<p>Similarly, functions such as <code>status()</code>,
<code>launch_local()</code> or <code>launch_remote()</code> should be
specified with the desired ‘.compute’ argument.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
<div id="errors-interrupts-and-timeouts" class="section level3">
<h3>Errors, Interrupts and Timeouts</h3>
<p>If execution in a mirai fails, the error message is returned as a
character string of class ‘miraiError’ and ‘errorValue’ to facilitate
debugging. <code>is_mirai_error()</code> may be used to test for mirai
execution errors.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">mirai</span>(<span class="fu">stop</span>(<span class="st">&quot;occurred with a custom message&quot;</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>))</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="fu">call_mirai</span>(m1)<span class="sc">$</span>data</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="co">#&gt; &#39;miraiError&#39; chr Error: occurred with a custom message</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">mirai</span>(mirai<span class="sc">::</span><span class="fu">mirai</span>())</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="fu">call_mirai</span>(m2)<span class="sc">$</span>data</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="co">#&gt; &#39;miraiError&#39; chr Error in mirai::mirai(): missing expression, perhaps wrap in {}?</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="fu">is_mirai_error</span>(m2<span class="sc">$</span>data)</span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a><span class="fu">is_error_value</span>(m2<span class="sc">$</span>data)</span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>If a daemon instance is sent a user interrupt, the mirai will resolve
to an empty character string of class ‘miraiInterrupt’ and ‘errorValue’.
<code>is_mirai_interrupt()</code> may be used to test for such
interrupts.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">is_mirai_interrupt</span>(m2<span class="sc">$</span>data)</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>If execution of a mirai surpasses the timeout set via the ‘.timeout’
argument, the mirai will resolve to an ‘errorValue’. This can, amongst
other things, guard against mirai processes that have the potential to
hang and never return.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">mirai</span>(nanonext<span class="sc">::</span><span class="fu">msleep</span>(<span class="dv">1000</span>), <span class="at">.timeout =</span> <span class="dv">500</span>)</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="fu">call_mirai</span>(m3)<span class="sc">$</span>data</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="co">#&gt; &#39;errorValue&#39; int 5 | Timed out</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="fu">is_mirai_error</span>(m3<span class="sc">$</span>data)</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="fu">is_mirai_interrupt</span>(m3<span class="sc">$</span>data)</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a><span class="fu">is_error_value</span>(m3<span class="sc">$</span>data)</span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p><code>is_error_value()</code> tests for all mirai execution errors,
user interrupts and timeouts.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>
<div id="parallel-clusters" class="section level3">
<h3>Parallel Clusters</h3>
<p>This package contains experimental functions and S3 methods using
<code>mirai</code> as an alternative communications backend for R. These
were developed to fulfil a request by R Core at R Project Sprint 2023,
and requires R &gt;= 4.4 (currently R-devel).</p>
<p><code>make_cluster()</code> creates a cluster of type ‘miraiCluster’,
which may be used as a cluster object for any function in the
<code>parallel</code> base package such as
<code>parallel::clusterApply()</code>,
<code>parallel::parLapply()</code> or the load-balanced version
<code>parallel::parLapplyLB()</code>.</p>
<ul>
<li>Specify ‘n’ to launch nodes on the local machine.</li>
<li>Specify ‘url’ for receiving connections from remote nodes.</li>
<li>Specify ‘remote’ to launch remote daemons using a remote
configuration generated by <code>remote_config()</code> or
<code>ssh_config()</code>. Otherwise, the shell commands for manual
deployment of nodes on remote resources are printed in interactive
sessions.</li>
<li><code>launch_remote()</code> may also be called on a ’miraiCluster`
to return the shell commands for deployment of remote nodes.</li>
<li><code>status()</code> may be called on a ’miraiCluster` to check the
number of connected nodes at any time.</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">make_cluster</span>(<span class="dv">4</span>)</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>cl</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="co">#&gt; &lt; miraiCluster &gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co">#&gt;  - cluster ID: `1`</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="co">#&gt;  - nodes: 4</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="co">#&gt;  - active: TRUE</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a>parallel<span class="sc">::</span><span class="fu">parLapply</span>(cl, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, rnorm)</span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="co">#&gt; [1] 0.9349511</span></span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a><span class="co">#&gt; [1]  0.2740651 -0.8752859</span></span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb31-15"><a href="#cb31-15" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb31-16"><a href="#cb31-16" tabindex="-1"></a><span class="co">#&gt; [1]  0.61166629 -0.03632626 -0.12060338</span></span>
<span id="cb31-17"><a href="#cb31-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb31-18"><a href="#cb31-18" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb31-19"><a href="#cb31-19" tabindex="-1"></a><span class="co">#&gt; [1]  0.5289575  0.5217364  0.7883240 -0.7129124</span></span>
<span id="cb31-20"><a href="#cb31-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb31-21"><a href="#cb31-21" tabindex="-1"></a><span class="co">#&gt; [[5]]</span></span>
<span id="cb31-22"><a href="#cb31-22" tabindex="-1"></a><span class="co">#&gt; [1]  0.06917136 -0.84272449 -0.77290546  0.60330642 -0.31608583</span></span>
<span id="cb31-23"><a href="#cb31-23" tabindex="-1"></a></span>
<span id="cb31-24"><a href="#cb31-24" tabindex="-1"></a><span class="fu">status</span>(cl)</span>
<span id="cb31-25"><a href="#cb31-25" tabindex="-1"></a><span class="co">#&gt; $connections</span></span>
<span id="cb31-26"><a href="#cb31-26" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb31-27"><a href="#cb31-27" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb31-28"><a href="#cb31-28" tabindex="-1"></a><span class="co">#&gt; $daemons</span></span>
<span id="cb31-29"><a href="#cb31-29" tabindex="-1"></a><span class="co">#&gt; [1] &quot;abstract://70a80698e7fd337e6a44a01c&quot;</span></span>
<span id="cb31-30"><a href="#cb31-30" tabindex="-1"></a></span>
<span id="cb31-31"><a href="#cb31-31" tabindex="-1"></a><span class="fu">stop_cluster</span>(cl)</span>
<span id="cb31-32"><a href="#cb31-32" tabindex="-1"></a></span>
<span id="cb31-33"><a href="#cb31-33" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">make_cluster</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">url =</span> <span class="st">&quot;tcp://10.75.32.70:0&quot;</span>)</span>
<span id="cb31-34"><a href="#cb31-34" tabindex="-1"></a><span class="co">#&gt; Shell commands for deployment on nodes:</span></span>
<span id="cb31-35"><a href="#cb31-35" tabindex="-1"></a><span class="co">#&gt; [1]</span></span>
<span id="cb31-36"><a href="#cb31-36" tabindex="-1"></a><span class="co">#&gt; Rscript -e &quot;mirai::daemon(&#39;tcp://10.75.32.70:35547&#39;,rs=c(10407,-1439680903,-237452314,1886227759,622096804,751326293,1560860946))&quot;</span></span>
<span id="cb31-37"><a href="#cb31-37" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb31-38"><a href="#cb31-38" tabindex="-1"></a><span class="co">#&gt; [2]</span></span>
<span id="cb31-39"><a href="#cb31-39" tabindex="-1"></a><span class="co">#&gt; Rscript -e &quot;mirai::daemon(&#39;tcp://10.75.32.70:35547&#39;,rs=c(10407,241471868,259704621,-398543829,27835105,873330934,227969754))&quot;</span></span>
<span id="cb31-40"><a href="#cb31-40" tabindex="-1"></a></span>
<span id="cb31-41"><a href="#cb31-41" tabindex="-1"></a><span class="fu">stop_cluster</span>(cl)</span></code></pre></div>
<p>Created clusters are fully compatible with parallel cluster
types.</p>
<p>As an example, they may be registered by package <a href="https://cran.r-project.org/package=doParallel"><code>doParallel</code></a>
for use with the <a href="https://cran.r-project.org/package=foreach"><code>foreach</code></a>
package.</p>
<p><a href="#table-of-contents">« Back to ToC</a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
